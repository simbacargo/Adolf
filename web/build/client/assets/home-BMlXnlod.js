import{w as P,a as l,p as e,z as A}from"./chunk-EPOLDU6W-COH--sv6.js";import{c as r}from"./createLucideIcon-zG5NMKvf.js";import{C as T}from"./circle-check-CEpkT5PV.js";const I=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],v=r("chevron-down",I);const E=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],q=r("chevron-up",E);const R=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],L=r("circle-user",R);const U=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],N=r("circle-x",U);const B=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],F=r("pen-line",B);const O=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],H=r("search",O);const V=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],X=r("trash-2",V);const J=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Z=r("user-plus",J);const G=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],K=r("users",G);const Q=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],W=r("x",Q),Y=[],u="https://adolf.nsaro.com/api/members/",ee=()=>{const[d,p]=l.useState(Y),[w,x]=l.useState(!1),[o,b]=l.useState(null),[h,k]=l.useState(""),[a,M]=l.useState({key:"fullName",direction:"asc"}),[t,n]=l.useState({fullName:"",age:"",sex:"Male",maritalStatus:"Single",children:0,phone:"+255 ",regDate:"",expDate:"",membershipPlan:"Basic 5,000 ($5)"}),C=new Date;l.useEffect(()=>{(async()=>{try{const c=await(await fetch(u,{headers:{Authorization:`Token ${localStorage.getItem("token")}`}})).json();p(c)}catch(i){console.error("Fetch error:",i)}})()},[]);const m=l.useMemo(()=>d.map(s=>({...s,isActive:new Date(s.expDate)>C})),[d]),g=l.useMemo(()=>m.filter(s=>s.fullName.toLowerCase().includes(h.toLowerCase())||s.phone.includes(h)),[m,h]),S=l.useMemo(()=>{const s=[...g];return s.sort((i,c)=>i[a.key]<c[a.key]?a.direction==="asc"?-1:1:i[a.key]>c[a.key]?a.direction==="asc"?1:-1:0),s},[g,a]),$=()=>{b(null),n({fullName:"",age:"",sex:"Male",maritalStatus:"Single",children:0,phone:"+255 ",regDate:"",expDate:"",membershipPlan:"Basic ($5)"}),x(!0)},z=s=>{b(s.id),n(s),x(!0)},D=async s=>{window.confirm("Permanent Action: Delete this member?")&&(await fetch(`${u}${s}/`,{method:"DELETE",headers:{Authorization:`Token ${localStorage.getItem("token")}`}})).ok&&p(d.filter(c=>c.id!==s))},_=async s=>{s.preventDefault();const i=o?"PUT":"POST",c=o?`${u}${o}/`:u,f=await fetch(c,{method:i,headers:{"Content-Type":"application/json",Authorization:`Token ${localStorage.getItem("token")}`},body:JSON.stringify(t)});if(f.ok){const j=await f.json();p(o?d.map(y=>y.id===o?j:y):[j,...d]),x(!1)}};return e.jsxs("div",{className:"min-h-screen bg-[#f8fafc] p-6 md:p-10 font-sans text-slate-900",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-10 gap-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-black text-slate-900 tracking-tight",children:"Tanzania Registry"}),e.jsx("p",{className:"text-slate-500 font-medium",children:"Community Member Management System"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:$,className:"flex items-center justify-center gap-3 bg-blue-600 hover:bg-blue-700 text-white px-8 py-4 rounded-2xl font-bold shadow-xl shadow-blue-200 transition-all active:scale-95",children:[e.jsx(Z,{size:22}),"Register Member"]}),e.jsx(A,{to:"/change-password",title:"Settings",className:"flex items-center justify-center gap-3 bg-emerald-600 hover:bg-emerald-700 text-white px-5 py-4 rounded-2xl font-bold shadow-xl shadow-emerald-200 transition-all active:scale-95",children:e.jsx(L,{size:24})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-10",children:[e.jsxs("div",{className:"bg-white p-6 rounded-[24px] shadow-sm border border-slate-200 flex items-center gap-5",children:[e.jsx("div",{className:"bg-blue-50 p-4 rounded-2xl text-blue-600",children:e.jsx(K,{size:28})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-400 font-bold uppercase tracking-wider",children:"Total Records"}),e.jsx("p",{className:"text-3xl font-black",children:d.length})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-[24px] shadow-sm border border-slate-200 flex items-center gap-5",children:[e.jsx("div",{className:"bg-emerald-50 p-4 rounded-2xl text-emerald-600",children:e.jsx(T,{size:28})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-400 font-bold uppercase tracking-wider",children:"Active Members"}),e.jsx("p",{className:"text-3xl font-black text-emerald-600",children:m.filter(s=>s.isActive).length})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-[24px] shadow-sm border border-slate-200 flex items-center gap-5",children:[e.jsx("div",{className:"bg-rose-50 p-4 rounded-2xl text-rose-600",children:e.jsx(N,{size:28})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-400 font-bold uppercase tracking-wider",children:"Expired"}),e.jsx("p",{className:"text-3xl font-black text-rose-600",children:m.filter(s=>!s.isActive).length})]})]})]}),e.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl shadow-slate-200/60 border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"p-8 border-b border-slate-100 flex flex-col lg:flex-row lg:items-center justify-between gap-6",children:e.jsxs("div",{className:"relative group w-full lg:w-[450px]",children:[e.jsx(H,{className:"absolute left-5 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-blue-500 transition-colors",size:22}),e.jsx("input",{type:"text",placeholder:"Search by name, phone...",className:"w-full pl-14 pr-6 py-4 bg-slate-50 border-none rounded-2xl focus:ring-4 focus:ring-blue-500/10 focus:bg-white transition-all outline-none text-slate-700 font-medium",onChange:s=>k(s.target.value)})]})}),e.jsx("div",{className:"overflow-x-auto max-h-[600px] custom-scrollbar",children:e.jsxs("table",{className:"w-full text-left border-separate border-spacing-0",children:[e.jsx("thead",{className:"sticky top-0 z-30 bg-white/95 backdrop-blur-md",children:e.jsxs("tr",{className:"text-slate-400 text-[10px] uppercase tracking-[0.2em] font-black",children:[["fullName","membershipPlan","phone","expDate","isActive"].map(s=>e.jsx("th",{className:"px-8 py-5 border-b border-slate-100 cursor-pointer hover:text-blue-600 transition-colors",onClick:()=>M({key:s,direction:a.direction==="asc"?"desc":"asc"}),children:e.jsxs("div",{className:"flex items-center gap-2",children:[s==="membershipPlan"?"Plan":s.replace(/([A-Z])/g," $1").trim(),a.key===s&&(a.direction==="asc"?e.jsx(q,{size:14}):e.jsx(v,{size:14}))]})},s)),e.jsx("th",{className:"px-8 py-5 border-b border-slate-100 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-50",children:S.map(s=>e.jsxs("tr",{className:"group hover:bg-blue-50/40 transition-all",children:[e.jsx("td",{className:"px-8 py-5 font-bold text-slate-800 whitespace-nowrap",children:s.fullName}),e.jsx("td",{className:"px-8 py-5",children:e.jsx("span",{className:"px-3 py-1 bg-slate-100 text-slate-600 rounded-lg text-xs font-bold border border-slate-200",children:s.membershipPlan||"Basic 5,000 ($3)"})}),e.jsx("td",{className:"px-8 py-5 font-mono text-sm text-slate-500",children:s.phone}),e.jsx("td",{className:"px-8 py-5 text-slate-500 text-sm whitespace-nowrap",children:s.expDate}),e.jsx("td",{className:"px-8 py-5",children:e.jsx("span",{className:`flex items-center gap-2 px-4 py-1.5 rounded-full text-[10px] font-black uppercase border ${s.isActive?"bg-emerald-50 text-emerald-600 border-emerald-100":"bg-rose-50 text-rose-600 border-rose-100"}`,children:s.isActive?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"})," Active"]}):e.jsxs(e.Fragment,{children:[e.jsx(N,{size:10})," Expired"]})})}),e.jsx("td",{className:"px-8 py-5 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2 opacity-0 group-hover:opacity-100 transition-all",children:[e.jsx("button",{onClick:()=>z(s),className:"p-2.5 bg-blue-50 text-blue-600 rounded-xl hover:bg-blue-600 hover:text-white transition-all",children:e.jsx(F,{size:18})}),e.jsx("button",{onClick:()=>D(s.id),className:"p-2.5 bg-rose-50 text-rose-600 rounded-xl hover:bg-rose-600 hover:text-white transition-all",children:e.jsx(X,{size:18})})]})})]},s.id))})]})})]})]}),w&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/40 backdrop-blur-md",children:e.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"p-8 border-b flex justify-between items-center bg-slate-50/50",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight",children:o?"Update Record":"New Registration"}),e.jsxs("p",{className:"text-sm text-slate-500 font-medium",children:["Registry ID: ",o||"Auto-generated"]})]}),e.jsx("button",{onClick:()=>x(!1),className:"p-3 hover:bg-rose-50 hover:text-rose-500 rounded-2xl transition-all",children:e.jsx(W,{size:24})})]}),e.jsxs("form",{onSubmit:_,className:"p-10 grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6",children:[e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest ml-1",children:"Full Name"}),e.jsx("input",{required:!0,type:"text",className:"w-full px-5 py-4 bg-slate-100 border-none rounded-2xl focus:ring-4 focus:ring-blue-500/10 focus:bg-white outline-none font-medium transition-all",value:t.fullName,onChange:s=>n({...t,fullName:s.target.value})})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-blue-600 tracking-widest ml-1",children:"Membership Plan"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{required:!0,className:"w-full px-5 py-4 bg-blue-50/50 border-2 border-blue-100 rounded-2xl focus:ring-4 focus:ring-blue-500/10 focus:bg-white outline-none font-bold text-blue-900 transition-all appearance-none",value:t.membershipPlan,onChange:s=>n({...t,membershipPlan:s.target.value}),children:[e.jsx("option",{value:"Basic 5,000 ($3)",children:"Basic Tier — 5,000 ( $5.00)"}),e.jsx("option",{value:"Standard 7,000 ($5)",children:"Standard Tier — 7,000 ( $7.00)"}),e.jsx("option",{value:"Premium 10,000 ($10)",children:"Premium Tier —  10,000 ($10.00)"})]}),e.jsx(v,{className:"absolute right-5 top-1/2 -translate-y-1/2 text-blue-400 pointer-events-none",size:20})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest ml-1",children:"Age"}),e.jsx("input",{required:!0,type:"number",className:"w-full px-5 py-4 bg-slate-100 border-none rounded-2xl focus:ring-4 focus:ring-blue-500/10 focus:bg-white outline-none font-medium transition-all",value:t.age,onChange:s=>n({...t,age:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest ml-1",children:"Sex"}),e.jsxs("select",{className:"w-full px-5 py-4 bg-slate-100 border-none rounded-2xl focus:ring-4 focus:ring-blue-500/10 focus:bg-white outline-none font-medium transition-all appearance-none",value:t.sex,onChange:s=>n({...t,sex:s.target.value}),children:[e.jsx("option",{children:"Male"}),e.jsx("option",{children:"Female"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest ml-1",children:"Phone (+255)"}),e.jsx("input",{required:!0,type:"text",className:"w-full px-5 py-4 bg-slate-100 border-none rounded-2xl focus:ring-4 focus:ring-blue-500/10 focus:bg-white outline-none font-medium transition-all font-mono",value:t.phone,onChange:s=>n({...t,phone:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-emerald-600 tracking-widest ml-1",children:"Reg. Date"}),e.jsx("input",{required:!0,type:"date",className:"w-full px-5 py-4 bg-slate-100 border-none rounded-2xl focus:ring-4 focus:ring-blue-500/10 focus:bg-white outline-none font-medium transition-all",value:t.regDate,onChange:s=>n({...t,regDate:s.target.value})})]}),e.jsxs("div",{className:"space-y-2 col-span-2 md:col-span-1",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-rose-600 tracking-widest ml-1",children:"Exp. Date"}),e.jsx("input",{required:!0,type:"date",className:"w-full px-5 py-4 bg-slate-100 border-none rounded-2xl focus:ring-4 focus:ring-blue-500/10 focus:bg-white outline-none font-medium transition-all",value:t.expDate,onChange:s=>n({...t,expDate:s.target.value})})]}),e.jsxs("div",{className:"col-span-2 pt-6 flex flex-col md:flex-row gap-4",children:[e.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-5 rounded-[20px] font-black shadow-xl shadow-blue-200 hover:bg-blue-700 transition-all active:scale-[0.98]",children:o?"Update Member Info":"Confirm Registration"}),e.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-10 bg-slate-100 text-slate-500 py-5 rounded-[20px] font-black hover:bg-slate-200 transition-all",children:"Cancel"})]})]})]})})]})},le=P(ee);export{le as default};
