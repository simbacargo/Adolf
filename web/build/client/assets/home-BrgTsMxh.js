import{w as $,a as r,p as e,z as A}from"./chunk-EPOLDU6W-COH--sv6.js";import{c as n}from"./createLucideIcon-zG5NMKvf.js";import{C as E}from"./circle-check-CEpkT5PV.js";const I=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],T=n("chevron-down",I);const L=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],R=n("chevron-up",L);const q=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],F=n("circle-user",q);const P=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],v=n("circle-x",P);const U=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],O=n("pen-line",U);const H=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],V=n("search",H);const B=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],J=n("trash-2",B);const X=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Y=n("user-plus",X);const Z=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],K=n("users",Z);const W=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],G=n("x",W),Q=()=>{const i=["Juma","Asha","Mwinyi","Neema","Baraka","Zuwena","Said","Fatuma","Elias","Lulu"],x=["Kassim","Mbeki","Nyerere","Mlowo","Makamba","Mtungi","Chale","Sokoine","Mwinyi","Moyo"],g=["Single","Married","Divorced","Widowed"];return Array.from({length:100},(p,a)=>{const u=new Date(2025,Math.floor(Math.random()*6),Math.floor(Math.random()*28)),d=new Date(u);return d.setFullYear(d.getFullYear()+(Math.random()>.4?1:0)),{id:a+1,fullName:`${i[Math.floor(Math.random()*10)]} ${x[Math.floor(Math.random()*10)]}`,age:Math.floor(Math.random()*45)+18,sex:Math.random()>.5?"Male":"Female",maritalStatus:g[Math.floor(Math.random()*4)],children:Math.floor(Math.random()*6),phone:`+255 ${700+Math.floor(Math.random()*99)} ${Math.floor(1e5+Math.random()*9e5)}`,regDate:u.toISOString().split("T")[0],expDate:d.toISOString().split("T")[0]}})},ee=Q(),b="https://adolf.nsaro.com/api/members/",te=()=>{const[i,x]=r.useState(ee),[g,p]=r.useState(!1),[a,u]=r.useState(null),[d,w]=r.useState(""),[l,k]=r.useState({key:"fullName",direction:"asc"}),[s,o]=r.useState({fullName:"",age:"",sex:"Male",maritalStatus:"Single",children:0,phone:"+255 ",regDate:"",expDate:""}),M=new Date;r.useEffect(()=>{(async()=>{const c=await(await fetch(b)).json();x(c)})()},[]);const h=r.useMemo(()=>i.map(t=>({...t,isActive:new Date(t.expDate)>M})),[i]),f=r.useMemo(()=>h.filter(t=>t.fullName.toLowerCase().includes(d.toLowerCase())||t.phone.includes(d)),[h,d]),C=r.useMemo(()=>{const t=[...f];return t.sort((m,c)=>m[l.key]<c[l.key]?l.direction==="asc"?-1:1:m[l.key]>c[l.key]?l.direction==="asc"?1:-1:0),t},[f,l]),D=()=>{u(null),o({fullName:"",age:"",sex:"Male",maritalStatus:"Single",children:0,phone:"+255 ",regDate:"",expDate:""}),p(!0)},S=t=>{u(t.id),o(t),p(!0)},_=async t=>{window.confirm("Permanent Action: Delete this member?")&&(await fetch(`${b}${t}/`,{method:"DELETE"})).ok&&x(i.filter(c=>c.id!==t))},z=async t=>{t.preventDefault();const m=a?"PUT":"POST",c=a?`${b}${a}/`:b,y=await fetch(c,{method:m,headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(y.ok){const j=await y.json();x(a?i.map(N=>N.id===a?j:N):[j,...i]),p(!1)}};return e.jsxs("div",{className:"min-h-screen bg-[#f8fafc] p-6 md:p-10 font-sans text-slate-900",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-10 gap-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-black text-slate-900 tracking-tight",children:"Tanzania Registry"}),e.jsx("p",{className:"text-slate-500 font-medium",children:"Community Member Management System"})]}),e.jsxs("button",{onClick:D,className:"flex items-center justify-center gap-3 bg-blue-600 hover:bg-blue-700 text-white px-8 py-4 rounded-2xl font-bold shadow-xl shadow-blue-200 transition-all active:scale-95",children:[e.jsx(Y,{size:22}),"Register Member"]}),e.jsx(A,{to:"/change-password",title:"Settings",className:"flex items-center justify-center gap-3 bg-emerald-600 hover:bg-emerald-700 text-white px-8 py-4 rounded-2xl font-bold shadow-xl shadow-emerald-200 transition-all active:scale-95",children:e.jsx(F,{size:24})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-10",children:[e.jsxs("div",{className:"bg-white p-6 rounded-[24px] shadow-sm border border-slate-200 flex items-center gap-5",children:[e.jsx("div",{className:"bg-blue-50 p-4 rounded-2xl text-blue-600",children:e.jsx(K,{size:28})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-400 font-bold uppercase tracking-wider",children:"Total Records"}),e.jsx("p",{className:"text-3xl font-black",children:i.length})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-[24px] shadow-sm border border-slate-200 flex items-center gap-5",children:[e.jsx("div",{className:"bg-emerald-50 p-4 rounded-2xl text-emerald-600",children:e.jsx(E,{size:28})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-400 font-bold uppercase tracking-wider",children:"Active Members"}),e.jsx("p",{className:"text-3xl font-black text-emerald-600",children:h.filter(t=>t.isActive).length})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-[24px] shadow-sm border border-slate-200 flex items-center gap-5",children:[e.jsx("div",{className:"bg-rose-50 p-4 rounded-2xl text-rose-600",children:e.jsx(v,{size:28})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-400 font-bold uppercase tracking-wider",children:"Expired"}),e.jsx("p",{className:"text-3xl font-black text-rose-600",children:h.filter(t=>!t.isActive).length})]})]})]}),e.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl shadow-slate-200/60 border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"p-8 border-b border-slate-100 flex flex-col lg:flex-row lg:items-center justify-between gap-6",children:e.jsxs("div",{className:"relative group w-full lg:w-[450px]",children:[e.jsx(V,{className:"absolute left-5 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-blue-500 transition-colors",size:22}),e.jsx("input",{type:"text",placeholder:"Search by name, phone...",className:"w-full pl-14 pr-6 py-4 bg-slate-50 border-none rounded-2xl focus:ring-4 focus:ring-blue-500/10 focus:bg-white transition-all outline-none text-slate-700 font-medium",onChange:t=>w(t.target.value)})]})}),e.jsx("div",{className:"overflow-x-auto max-h-[600px] custom-scrollbar",children:e.jsxs("table",{className:"w-full text-left border-separate border-spacing-0",children:[e.jsx("thead",{className:"sticky top-0 z-30 bg-white/95 backdrop-blur-md",children:e.jsxs("tr",{className:"text-slate-400 text-[10px] uppercase tracking-[0.2em] font-black",children:[["fullName","age","sex","maritalStatus","children","phone","regDate","expDate","isActive"].map(t=>e.jsx("th",{className:"px-8 py-5 border-b border-slate-100 cursor-pointer hover:text-blue-600 transition-colors",onClick:()=>k({key:t,direction:l.direction==="asc"?"desc":"asc"}),children:e.jsxs("div",{className:"flex items-center gap-2",children:[t.replace(/([A-Z])/g," $1").trim(),l.key===t&&(l.direction==="asc"?e.jsx(R,{size:14}):e.jsx(T,{size:14}))]})},t)),e.jsx("th",{className:"px-8 py-5 border-b border-slate-100 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-50",children:C.map(t=>e.jsxs("tr",{className:"group hover:bg-blue-50/40 transition-all",children:[e.jsx("td",{className:"px-8 py-5 font-bold text-slate-800 whitespace-nowrap",children:t.fullName}),e.jsx("td",{className:"px-8 py-5 text-slate-600 font-medium",children:t.age}),e.jsx("td",{className:"px-8 py-5 text-slate-600 font-medium",children:t.sex}),e.jsx("td",{className:"px-8 py-5 text-slate-500",children:t.maritalStatus}),e.jsx("td",{className:"px-8 py-5 text-center text-slate-600 font-bold",children:t.children}),e.jsx("td",{className:"px-8 py-5 font-mono text-sm text-slate-500",children:t.phone}),e.jsx("td",{className:"px-8 py-5 text-slate-500 text-sm whitespace-nowrap",children:t.regDate}),e.jsx("td",{className:"px-8 py-5 text-slate-500 text-sm whitespace-nowrap",children:t.expDate}),e.jsx("td",{className:"px-8 py-5",children:e.jsx("span",{className:`flex items-center gap-2 px-4 py-1.5 rounded-full text-[10px] font-black uppercase border ${t.isActive?"bg-emerald-50 text-emerald-600 border-emerald-100":"bg-rose-50 text-rose-600 border-rose-100"}`,children:t.isActive?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"})," Active"]}):e.jsxs(e.Fragment,{children:[e.jsx(v,{size:10})," Expired"]})})}),e.jsx("td",{className:"px-8 py-5 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2 opacity-0 group-hover:opacity-100 transition-all",children:[e.jsx("button",{onClick:()=>S(t),className:"p-2.5 bg-blue-50 text-blue-600 rounded-xl hover:bg-blue-600 hover:text-white transition-all",children:e.jsx(O,{size:18})}),e.jsx("button",{onClick:()=>_(t.id),className:"p-2.5 bg-rose-50 text-rose-600 rounded-xl hover:bg-rose-600 hover:text-white transition-all",children:e.jsx(J,{size:18})})]})})]},t.id))})]})})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/40 backdrop-blur-md",children:e.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"p-8 border-b flex justify-between items-center bg-slate-50/50",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight",children:a?"Update Record":"New Registration"}),e.jsxs("p",{className:"text-sm text-slate-500 font-medium",children:["Registry ID: ",a||"Auto-generated"]})]}),e.jsx("button",{onClick:()=>p(!1),className:"p-3 hover:bg-rose-50 hover:text-rose-500 rounded-2xl transition-all",children:e.jsx(G,{size:24})})]}),e.jsxs("form",{onSubmit:z,className:"p-10 grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6",children:[e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest ml-1",children:"Full Name"}),e.jsx("input",{required:!0,type:"text",className:"w-full px-5 py-4 bg-slate-100 border-none rounded-2xl focus:ring-4 focus:ring-blue-500/10 focus:bg-white outline-none font-medium transition-all",value:s.fullName,onChange:t=>o({...s,fullName:t.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest ml-1",children:"Age"}),e.jsx("input",{required:!0,type:"number",className:"w-full px-5 py-4 bg-slate-100 border-none rounded-2xl focus:ring-4 focus:ring-blue-500/10 focus:bg-white outline-none font-medium transition-all",value:s.age,onChange:t=>o({...s,age:t.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest ml-1",children:"Sex"}),e.jsxs("select",{className:"w-full px-5 py-4 bg-slate-100 border-none rounded-2xl focus:ring-4 focus:ring-blue-500/10 focus:bg-white outline-none font-medium transition-all appearance-none",value:s.sex,onChange:t=>o({...s,sex:t.target.value}),children:[e.jsx("option",{children:"Male"}),e.jsx("option",{children:"Female"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest ml-1 text-blue-600",children:"Phone (+255)"}),e.jsx("input",{required:!0,type:"text",className:"w-full px-5 py-4 bg-slate-100 border-none rounded-2xl focus:ring-4 focus:ring-blue-500/10 focus:bg-white outline-none font-medium transition-all font-mono",value:s.phone,onChange:t=>o({...s,phone:t.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest ml-1",children:"Children"}),e.jsx("input",{type:"number",className:"w-full px-5 py-4 bg-slate-100 border-none rounded-2xl focus:ring-4 focus:ring-blue-500/10 focus:bg-white outline-none font-medium transition-all",value:s.children,onChange:t=>o({...s,children:t.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest ml-1 text-emerald-600",children:"Reg. Date"}),e.jsx("input",{required:!0,type:"date",className:"w-full px-5 py-4 bg-slate-100 border-none rounded-2xl focus:ring-4 focus:ring-blue-500/10 focus:bg-white outline-none font-medium transition-all",value:s.regDate,onChange:t=>o({...s,regDate:t.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest ml-1 text-rose-600",children:"Exp. Date"}),e.jsx("input",{required:!0,type:"date",className:"w-full px-5 py-4 bg-slate-100 border-none rounded-2xl focus:ring-4 focus:ring-blue-500/10 focus:bg-white outline-none font-medium transition-all",value:s.expDate,onChange:t=>o({...s,expDate:t.target.value})})]}),e.jsxs("div",{className:"col-span-2 pt-6 flex flex-col md:flex-row gap-4",children:[e.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-5 rounded-[20px] font-black shadow-xl shadow-blue-200 hover:bg-blue-700 transition-all active:scale-[0.98]",children:a?"Update Member Info":"Confirm Registration"}),e.jsx("button",{type:"button",onClick:()=>p(!1),className:"px-10 bg-slate-100 text-slate-500 py-5 rounded-[20px] font-black hover:bg-slate-200 transition-all",children:"Cancel"})]})]})]})})]})},re=$(te);export{re as default};
