import{w as A,a as n,p as e,z as P}from"./chunk-EPOLDU6W-COH--sv6.js";import{c as o}from"./createLucideIcon-zG5NMKvf.js";import{C as T}from"./circle-check-CEpkT5PV.js";const I=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],v=o("chevron-down",I);const E=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],q=o("chevron-up",E);const L=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],R=o("circle-user",L);const F=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],w=o("circle-x",F);const U=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],B=o("pen-line",U);const O=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],H=o("search",O);const V=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],J=o("trash-2",V);const X=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Y=o("user-plus",X);const Z=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],K=o("users",Z);const W=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],G=o("x",W),Q=()=>{const i=["Juma","Asha","Mwinyi","Neema","Baraka","Zuwena","Said","Fatuma","Elias","Lulu"],m=["Kassim","Mbeki","Nyerere","Mlowo","Makamba","Mtungi","Chale","Sokoine","Mwinyi","Moyo"],g=["Single","Married","Divorced","Widowed"];return Array.from({length:100},(p,l)=>{const u=new Date(2025,Math.floor(Math.random()*6),Math.floor(Math.random()*28)),x=new Date(u);return x.setFullYear(x.getFullYear()+(Math.random()>.4?1:0)),{id:l+1,fullName:`${i[Math.floor(Math.random()*10)]} ${m[Math.floor(Math.random()*10)]}`,age:Math.floor(Math.random()*45)+18,sex:Math.random()>.5?"Male":"Female",maritalStatus:g[Math.floor(Math.random()*4)],children:Math.floor(Math.random()*6),phone:`+255 ${700+Math.floor(Math.random()*99)} ${Math.floor(1e5+Math.random()*9e5)}`,regDate:u.toISOString().split("T")[0],expDate:x.toISOString().split("T")[0]}})},ee=Q(),b="https://adolf.nsaro.com/api/members/",te=()=>{const[i,m]=n.useState(ee);console.log("===================================="),console.log(i),console.log("====================================");const[g,p]=n.useState(!1),[l,u]=n.useState(null),[x,k]=n.useState(""),[r,M]=n.useState({key:"fullName",direction:"asc"}),[s,c]=n.useState({fullName:"",age:"",sex:"Male",maritalStatus:"Single",children:0,phone:"+255 ",regDate:"",expDate:"",membershipPlan:"Basic 5,000 ($5)"}),S=new Date;n.useEffect(()=>{(async()=>{try{const a=await fetch(b,{headers:{Authorization:`Token ${localStorage.getItem("token")}`}});if(a.status===401){localStorage.removeItem("token"),window.location.reload();return}if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const d=await a.json();m(d)}catch(a){console.error("Fetch error:",a)}})()},[]);const h=n.useMemo(()=>i.map(t=>({...t,isActive:new Date(t.expDate)>S})),[i]),f=n.useMemo(()=>h.filter(t=>t.fullName.toLowerCase().includes(x.toLowerCase())||t.phone.includes(x)),[h,x]),C=n.useMemo(()=>{const t=[...f];return t.sort((a,d)=>a[r.key]<d[r.key]?r.direction==="asc"?-1:1:a[r.key]>d[r.key]?r.direction==="asc"?1:-1:0),t},[f,r]),$=()=>{u(null),c({fullName:"",age:"",sex:"Male",maritalStatus:"Single",children:0,phone:"+255 ",regDate:"",expDate:"",membershipPlan:"Basic ($5)"}),p(!0)},D=t=>{u(t.id),c(t),p(!0)},z=async t=>{window.confirm("Permanent Action: Delete this member?")&&(await fetch(`${b}${t}/`,{method:"DELETE",headers:{Authorization:`Token ${localStorage.getItem("token")}`}})).ok&&m(i.filter(d=>d.id!==t))},_=async t=>{t.preventDefault();const a=l?"PUT":"POST",d=l?`${b}${l}/`:b,j=await fetch(d,{method:a,headers:{"Content-Type":"application/json",Authorization:`Token ${localStorage.getItem("token")}`},body:JSON.stringify(s)});if(j.ok){const y=await j.json();m(l?i.map(N=>N.id===l?y:N):[y,...i]),p(!1)}};return e.jsxs("div",{className:"min-h-screen bg-[#f8fafc] p-6 md:p-10 font-sans text-slate-900",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-10 gap-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-black text-slate-900 tracking-tight",children:"Tanzania Registry"}),e.jsx("p",{className:"text-slate-500 font-medium",children:"Community Member Management System"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:$,className:"flex items-center justify-center gap-3 bg-blue-600 hover:bg-blue-700 text-white px-8 py-4 rounded-2xl font-bold shadow-xl shadow-blue-200 transition-all active:scale-95",children:[e.jsx(Y,{size:22}),"Register Member"]}),e.jsx(P,{to:"/change-password",title:"Settings",className:"flex items-center justify-center gap-3 bg-emerald-600 hover:bg-emerald-700 text-white px-5 py-4 rounded-2xl font-bold shadow-xl shadow-emerald-200 transition-all active:scale-95",children:e.jsx(R,{size:24})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-10",children:[e.jsxs("div",{className:"bg-white p-6 rounded-[24px] shadow-sm border border-slate-200 flex items-center gap-5",children:[e.jsx("div",{className:"bg-blue-50 p-4 rounded-2xl text-blue-600",children:e.jsx(K,{size:28})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-400 font-bold uppercase tracking-wider",children:"Total Records"}),e.jsx("p",{className:"text-3xl font-black",children:i.length})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-[24px] shadow-sm border border-slate-200 flex items-center gap-5",children:[e.jsx("div",{className:"bg-emerald-50 p-4 rounded-2xl text-emerald-600",children:e.jsx(T,{size:28})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-400 font-bold uppercase tracking-wider",children:"Active Members"}),e.jsx("p",{className:"text-3xl font-black text-emerald-600",children:h.filter(t=>t.isActive).length})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-[24px] shadow-sm border border-slate-200 flex items-center gap-5",children:[e.jsx("div",{className:"bg-rose-50 p-4 rounded-2xl text-rose-600",children:e.jsx(w,{size:28})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-400 font-bold uppercase tracking-wider",children:"Expired"}),e.jsx("p",{className:"text-3xl font-black text-rose-600",children:h.filter(t=>!t.isActive).length})]})]})]}),e.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl shadow-slate-200/60 border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"p-8 border-b border-slate-100 flex flex-col lg:flex-row lg:items-center justify-between gap-6",children:e.jsxs("div",{className:"relative group w-full lg:w-[450px]",children:[e.jsx(H,{className:"absolute left-5 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-blue-500 transition-colors",size:22}),e.jsx("input",{type:"text",placeholder:"Search by name, phone...",className:"w-full pl-14 pr-6 py-4 bg-slate-50 border-none rounded-2xl focus:ring-4 focus:ring-blue-500/10 focus:bg-white transition-all outline-none text-slate-700 font-medium",onChange:t=>k(t.target.value)})]})}),e.jsx("div",{className:"overflow-x-auto max-h-[600px] custom-scrollbar",children:e.jsxs("table",{className:"w-full text-left border-separate border-spacing-0",children:[e.jsx("thead",{className:"sticky top-0 z-30 bg-white/95 backdrop-blur-md",children:e.jsxs("tr",{className:"text-slate-400 text-[10px] uppercase tracking-[0.2em] font-black",children:[["fullName","membershipPlan","phone","expDate","isActive"].map(t=>e.jsx("th",{className:"px-8 py-5 border-b border-slate-100 cursor-pointer hover:text-blue-600 transition-colors",onClick:()=>M({key:t,direction:r.direction==="asc"?"desc":"asc"}),children:e.jsxs("div",{className:"flex items-center gap-2",children:[t==="membershipPlan"?"Plan":t.replace(/([A-Z])/g," $1").trim(),r.key===t&&(r.direction==="asc"?e.jsx(q,{size:14}):e.jsx(v,{size:14}))]})},t)),e.jsx("th",{className:"px-8 py-5 border-b border-slate-100 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-50",children:C.map(t=>e.jsxs("tr",{className:"group hover:bg-blue-50/40 transition-all",children:[e.jsx("td",{className:"px-8 py-5 font-bold text-slate-800 whitespace-nowrap",children:t.fullName}),e.jsx("td",{className:"px-8 py-5",children:e.jsx("span",{className:"px-3 py-1 bg-slate-100 text-slate-600 rounded-lg text-xs font-bold border border-slate-200",children:t.membershipPlan||"Basic 5,000 ($3)"})}),e.jsx("td",{className:"px-8 py-5 font-mono text-sm text-slate-500",children:t.phone}),e.jsx("td",{className:"px-8 py-5 text-slate-500 text-sm whitespace-nowrap",children:t.expDate}),e.jsx("td",{className:"px-8 py-5",children:e.jsx("span",{className:`flex items-center gap-2 px-4 py-1.5 rounded-full text-[10px] font-black uppercase border ${t.isActive?"bg-emerald-50 text-emerald-600 border-emerald-100":"bg-rose-50 text-rose-600 border-rose-100"}`,children:t.isActive?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"})," Active"]}):e.jsxs(e.Fragment,{children:[e.jsx(w,{size:10})," Expired"]})})}),e.jsx("td",{className:"px-8 py-5 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2 opacity-0 group-hover:opacity-100 transition-all",children:[e.jsx("button",{onClick:()=>D(t),className:"p-2.5 bg-blue-50 text-blue-600 rounded-xl hover:bg-blue-600 hover:text-white transition-all",children:e.jsx(B,{size:18})}),e.jsx("button",{onClick:()=>z(t.id),className:"p-2.5 bg-rose-50 text-rose-600 rounded-xl hover:bg-rose-600 hover:text-white transition-all",children:e.jsx(J,{size:18})})]})})]},t.id))})]})})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/40 backdrop-blur-md",children:e.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"p-8 border-b flex justify-between items-center bg-slate-50/50",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight",children:l?"Update Record":"New Registration"}),e.jsxs("p",{className:"text-sm text-slate-500 font-medium",children:["Registry ID: ",l||"Auto-generated"]})]}),e.jsx("button",{onClick:()=>p(!1),className:"p-3 hover:bg-rose-50 hover:text-rose-500 rounded-2xl transition-all",children:e.jsx(G,{size:24})})]}),e.jsxs("form",{onSubmit:_,className:"p-10 grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6",children:[e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest ml-1",children:"Full Name"}),e.jsx("input",{required:!0,type:"text",className:"w-full px-5 py-4 bg-slate-100 border-none rounded-2xl focus:ring-4 focus:ring-blue-500/10 focus:bg-white outline-none font-medium transition-all",value:s.fullName,onChange:t=>c({...s,fullName:t.target.value})})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-blue-600 tracking-widest ml-1",children:"Membership Plan"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{required:!0,className:"w-full px-5 py-4 bg-blue-50/50 border-2 border-blue-100 rounded-2xl focus:ring-4 focus:ring-blue-500/10 focus:bg-white outline-none font-bold text-blue-900 transition-all appearance-none",value:s.membershipPlan,onChange:t=>c({...s,membershipPlan:t.target.value}),children:[e.jsx("option",{value:"Basic 5,000 ($3)",children:"Basic Tier — 5,000 ( $5.00)"}),e.jsx("option",{value:"Standard 7,000 ($5)",children:"Standard Tier — 7,000 ( $7.00)"}),e.jsx("option",{value:"Premium 10,000 ($10)",children:"Premium Tier —  10,000 ($10.00)"})]}),e.jsx(v,{className:"absolute right-5 top-1/2 -translate-y-1/2 text-blue-400 pointer-events-none",size:20})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest ml-1",children:"Age"}),e.jsx("input",{required:!0,type:"number",className:"w-full px-5 py-4 bg-slate-100 border-none rounded-2xl focus:ring-4 focus:ring-blue-500/10 focus:bg-white outline-none font-medium transition-all",value:s.age,onChange:t=>c({...s,age:t.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest ml-1",children:"Sex"}),e.jsxs("select",{className:"w-full px-5 py-4 bg-slate-100 border-none rounded-2xl focus:ring-4 focus:ring-blue-500/10 focus:bg-white outline-none font-medium transition-all appearance-none",value:s.sex,onChange:t=>c({...s,sex:t.target.value}),children:[e.jsx("option",{children:"Male"}),e.jsx("option",{children:"Female"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest ml-1",children:"Phone (+255)"}),e.jsx("input",{required:!0,type:"text",className:"w-full px-5 py-4 bg-slate-100 border-none rounded-2xl focus:ring-4 focus:ring-blue-500/10 focus:bg-white outline-none font-medium transition-all font-mono",value:s.phone,onChange:t=>c({...s,phone:t.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-emerald-600 tracking-widest ml-1",children:"Reg. Date"}),e.jsx("input",{required:!0,type:"date",className:"w-full px-5 py-4 bg-slate-100 border-none rounded-2xl focus:ring-4 focus:ring-blue-500/10 focus:bg-white outline-none font-medium transition-all",value:s.regDate,onChange:t=>c({...s,regDate:t.target.value})})]}),e.jsxs("div",{className:"space-y-2 col-span-2 md:col-span-1",children:[e.jsx("label",{className:"text-[10px] font-black uppercase text-rose-600 tracking-widest ml-1",children:"Exp. Date"}),e.jsx("input",{required:!0,type:"date",className:"w-full px-5 py-4 bg-slate-100 border-none rounded-2xl focus:ring-4 focus:ring-blue-500/10 focus:bg-white outline-none font-medium transition-all",value:s.expDate,onChange:t=>c({...s,expDate:t.target.value})})]}),e.jsxs("div",{className:"col-span-2 pt-6 flex flex-col md:flex-row gap-4",children:[e.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-5 rounded-[20px] font-black shadow-xl shadow-blue-200 hover:bg-blue-700 transition-all active:scale-[0.98]",children:l?"Update Member Info":"Confirm Registration"}),e.jsx("button",{type:"button",onClick:()=>p(!1),className:"px-10 bg-slate-100 text-slate-500 py-5 rounded-[20px] font-black hover:bg-slate-200 transition-all",children:"Cancel"})]})]})]})})]})},re=A(te);export{re as default};
